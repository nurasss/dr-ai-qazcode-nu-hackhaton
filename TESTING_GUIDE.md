# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –°–∏—Å—Ç–µ–º—ã –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¢–µ—Å—Ç–æ–≤—ã—Ö –î–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ç–µ—Å—Ç–æ–≤—ã—Ö-–¥–∞–Ω–Ω—ã—Ö)
2. [–ó–∞–ø—É—Å–∫ –í–∞–ª–∏–¥–∞—Ü–∏–∏](#–∑–∞–ø—É—Å–∫-–≤–∞–ª–∏–¥–∞—Ü–∏–∏)
3. [–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ù–æ–≤—ã—Ö –¢–µ—Å—Ç–æ–≤](#–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ-–Ω–æ–≤—ã—Ö-—Ç–µ—Å—Ç–æ–≤)
4. [–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](#–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
5. [–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –û—à–∏–±–æ–∫](#–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–æ—à–∏–±–æ–∫)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¢–µ—Å—Ç–æ–≤—ã—Ö –î–∞–Ω–Ω—ã—Ö

### test_set.jsonl
–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ —Å–ª—É—á–∞—è–º–∏. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç JSON –æ–±—ä–µ–∫—Ç:

```json
{
  "query": "–û–ø–∏—Å–∞–Ω–∏–µ —Å–∏–º–ø—Ç–æ–º–æ–≤ –ø–∞—Ü–∏–µ–Ω—Ç–∞",
  "gt": "ICD-10_–∫–æ–¥"
}
```

**–ü–æ–ª—è:**
- `query` (string): –û–ø–∏—Å–∞–Ω–∏–µ —Å–∏–º–ø—Ç–æ–º–æ–≤ –∏ –∂–∞–ª–æ–± –ø–∞—Ü–∏–µ–Ω—Ç–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- `gt` (string): Ground Truth - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ICD-10 –∫–æ–¥ –¥–∏–∞–≥–Ω–æ–∑–∞

### –ü—Ä–∏–º–µ—Ä
```json
{"query": "–°–∏–ª—å–Ω–∞—è –≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å, –ø–æ–≤—ã—à–µ–Ω–Ω–æ–µ –∞—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ, —Ä–≤–æ—Ç–∞, –±–æ–ª—å –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º –∫–≤–∞–¥—Ä–∞–Ω—Ç–µ –∂–∏–≤–æ—Ç–∞", "gt": "O14.2"}
{"query": "–ü–æ–≤—ã—à–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω–∞, –±–æ–ª—å –≤ –≥—Ä—É–¥–∏ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ", "gt": "E78.0"}
```

## –ó–∞–ø—É—Å–∫ –í–∞–ª–∏–¥–∞—Ü–∏–∏

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ó–∞–ø—É—â–µ–Ω —Å–µ—Ä–≤–µ—Ä: `node server.js`
- Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –§—É–Ω–∫—Ü–∏—è `/api/diagnose` –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ `http://localhost:3000`

### –ö–æ–º–∞–Ω–¥—ã

**–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:**
```bash
node validate-test-set.js
```

**–í—ã–≤–æ–¥:**
```
Testing with test_set.jsonl...
[1/8] Testing: "–°–∏–ª—å–Ω–∞—è –≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å, –ø–æ–≤—ã—à–µ–Ω–Ω–æ–µ..."
‚úÖ Match: O14.2 == O14.2 (Ground Truth Found!)

[5/8] Testing: "–ü–æ–≤—ã—à–µ–Ω–Ω—ã–π —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω, –±–æ–ª—å –≤ –≥—Ä—É–¥–∏..."
‚ùå Mismatch: E79.0 != E78.0 (Ground Truth Not Found)

Report:
========================================
Total: 8 tests
Passed: 7 tests
Failed: 1 tests
Success Rate: 87.5%
========================================
```

## –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ù–æ–≤—ã—Ö –¢–µ—Å—Ç–æ–≤

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ generate-test-set.js

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏ –∏–∑ `protocols_corpus.jsonl`:

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–¥–æ 3 –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª)
node generate-test-set.js

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Ñ–∞–π–ª (–¥–æ 5 –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª)
node generate-test-set.js my_tests.jsonl 5

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ file.jsonl (–¥–æ 10 –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª)
node generate-test-set.js file.jsonl 10
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `[output_file]` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ò–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `test_set_generated.jsonl`)
- `[max_cases_per_protocol]` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ú–∞–∫—Å–∏–º—É–º —Å–ª—É—á–∞–µ–≤ –Ω–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ç–æ–∫–æ–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3)

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏–∑ `protocols_corpus.jsonl`
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –≥–ª–∞–≤–Ω—ã–π ICD-–∫–æ–¥
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç query –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–º–ø—Ç–æ–º–æ–≤ –∏–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{"query": "...", "gt": "..."}`

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞
```
üìö Loading corpus: 523 documents
üîç Generating test cases (max 3 per protocol)...

‚úÖ Generated 1569 test cases
üìÑ Saved to: test_set_generated.jsonl

Example:
{
  "query": "–ü–∞—Ü–∏–µ–Ω—Ç –æ–±—Ä–∞—Ç–∏–ª—Å—è —Å –∂–∞–ª–æ–±–∞–º–∏ –Ω–∞: —Å–∏–ª—å–Ω–∞—è –≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å, –ø–æ–≤—ã—à–µ–Ω–Ω–æ–µ –∞—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ, –∂–∏–¥–∫–∏–π —Å—Ç—É–ª.",
  "gt": "I10"
}
```

## –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### Success Rate

| –ü—Ä–æ—Ü–µ–Ω—Ç | –û—Ü–µ–Ω–∫–∞ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|--------|--------------|
| > 90% | –û—Ç–ª–∏—á–Ω–æ | –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é |
| 80-90% | –•–æ—Ä–æ—à–æ | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ |
| 70-80% | –ü—Ä–∏–µ–º–ª–µ–º–æ | –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ |
| < 70% | –ö—Ä–∏—Ç–∏—á–Ω–æ | –ù—É–∂–µ–Ω —Å–µ—Ä—å—ë–∑–Ω—ã–π –ø–µ—Ä–µ—Å–º–æ—Ç—Ä –ª–æ–≥–∏–∫–∏ |

### –¢–∏–ø—ã –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### ‚úÖ –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (Exact Match)
```
‚úÖ Match: O14.2 == O14.2 (Ground Truth Found!)
```
–°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–Ω—É–ª–∞ —Ç–æ—á–Ω—ã–π –∫–æ–¥ –¥–∏–∞–≥–Ω–æ–∑–∞.

#### ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (Prefix Match)
```
‚úÖ Match: O14 == O14.2 (Prefix Match)
```
–°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–Ω—É–ª–∞ –∫–æ–¥ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–µ–º–ª–µ–º—ã–π).

#### ‚ùå –û—à–∏–±–∫–∞ (Mismatch)
```
‚ùå Mismatch: E79.0 != E78.0 (Ground Truth Not Found)
```
–°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–Ω—É–ª–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –û—à–∏–±–æ–∫

### –ï—Å–ª–∏ Success Rate –Ω–∏–∑–∫–∏–π (<80%)

#### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –Ω–∞–±–æ—Ä–∞
```bash
# –ü–æ–¥—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ –≤ test_set.jsonl
wc -l test_set.jsonl

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç (–∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º JSON)
head -n 1 test_set.jsonl | python -m json.tool
```

#### 2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
node server.js

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
curl http://localhost:3000/api/status
```

#### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ –∫–æ–¥–∞ (selectMostRelevantIcdCodes)

–§—É–Ω–∫—Ü–∏—è –≤ `server.js` (—Å—Ç—Ä–æ–∫–∏ ~150-200) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
- **–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ —Ç–µ–∫—Å—Ç–µ**: +10 –æ—á–∫–æ–≤ –µ—Å–ª–∏ –∫–æ–¥ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–µ
- **–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤**: +2 –æ—á–∫–∞ –∑–∞ –∫–∞–∂–¥–æ–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–∏–ø–∞ –æ—à–∏–±–æ–∫.

#### 4. –†–∞—Å—à–∏—Ä—å—Ç–µ –∏ —É–ª—É—á—à–∏—Ç–µ test_set.jsonl

–î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ —Ç–µ—Å—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è `generate-test-set.js`:
```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ 10 —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª
node generate-test-set.js test_set_new.jsonl 10

# –û–±—ä–µ–¥–∏–Ω–∏—Ç–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –Ω–∞–±–æ—Ä–æ–º
cat test_set.jsonl test_set_new.jsonl > test_set_combined.jsonl

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π –Ω–∞–±–æ—Ä
node validate-test-set.js test_set_combined.jsonl
```

### –¢–∏–ø–∏—á–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã

#### –ü—Ä–æ–±–ª–µ–º–∞: "Error: ENOENT: no such file"
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
```bash
pwd  # –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å server.js
node server.js
```

#### –ü—Ä–æ–±–ª–µ–º–∞: "Connection refused"
**–†–µ—à–µ–Ω–∏–µ:** –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000
```bash
node server.js
```

#### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç–µ –≤–µ—Å–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `selectMostRelevantIcdCodes` –≤ `server.js`:
```javascript
// –¢–µ–∫—É—â–∏–µ –≤–µ—Å–∞ (—Å—Ç—Ä–æ–∫–∞ ~165)
if (icdCodes.includes(code)) score += 10;  // –ú–æ–∂–µ—Ç –±—ã—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–æ –¥–æ 20
symptoms.forEach(symptom => {
  if (docText.toLowerCase().includes(symptom.toLowerCase())) {
    score += 2;  // –ú–æ–∂–µ—Ç –±—ã—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–æ –¥–æ 5
  }
});
```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –í–∞–ª–∏–¥–∞—Ü–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ü—Ä–æ—Ü–µ—Å—Å

1. **–ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** (8 —Ç–µ—Å—Ç–æ–≤)
   ```bash
   node validate-test-set.js
   ```
   ‚úÖ –ü–æ–ª—É—á–∏—Ç–µ –±–∞–∑–æ–≤—ã–π success rate

2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** (100+ —Ç–µ—Å—Ç–æ–≤)
   ```bash
   node generate-test-set.js test_set_large.jsonl 5
   node validate-test-set.js test_set_large.jsonl
   ```
   ‚úÖ –ü–æ–ª—É—á–∏—Ç–µ –Ω–∞–¥—ë–∂–Ω—É—é –æ—Ü–µ–Ω–∫—É –∫–∞—á–µ—Å—Ç–≤–∞

3. **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** (–ø–æ —Ç–∏–ø–∞–º –¥–∏–∞–≥–Ω–æ–∑–æ–≤)
   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ test_set —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–¥–æ–≤
   # –Ω–∞–ø—Ä–∏–º–µ—Ä: test_set_cardiac.jsonl, test_set_obstetric.jsonl
   ```

## –¶–µ–ª–µ–≤—ã–µ –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª—å |
|---------|------|
| Success Rate | ‚â• 90% |
| –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ | ‚â• 85% |
| –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ | ‚â§ 5% |
| –û—à–∏–±–∫–∏ | ‚â§ 10% |

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ö–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤ –≤ test_set.jsonl
grep -o '"gt":"[^"]*"' test_set.jsonl | sort | uniq | wc -l

# –í—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã
grep -o '"gt":"[^"]*"' test_set.jsonl | sort | uniq

# –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å —Ç–µ—Å—Ç—ã –ø–æ –∫–æ–¥–∞–º
grep -o '"gt":"[^"]*"' test_set.jsonl | sort | uniq -c | sort -rn
```

## –ü—Ä–∏–º–µ—Ä—ã –†–∞–±–æ—Ç—ã

### –ü–æ–ª–Ω—ã–π –¶–∏–∫–ª –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
node server.js

# 2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 2 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
sleep 2

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –±–∞–∑–æ–≤–æ–≥–æ –Ω–∞–±–æ—Ä–∞
node validate-test-set.js

# 4. –ï—Å–ª–∏ success rate < 80%, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
node generate-test-set.js test_set_extended.jsonl 5

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞
node validate-test-set.js test_set_extended.jsonl

# 6. –ï—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ, –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–∞–±–æ—Ä—ã
cat test_set.jsonl test_set_extended.jsonl > test_set_final.jsonl

# 7. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
node validate-test-set.js test_set_final.jsonl
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- [TEST_SET_README.md](TEST_SET_README.md) - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è
- [server.js](server.js) - –§—É–Ω–∫—Ü–∏—è `selectMostRelevantIcdCodes` (—Å—Ç—Ä–æ–∫–∏ ~150-200)
- [validate-test-set.js](validate-test-set.js) - –õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
